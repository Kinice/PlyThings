<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>css3 Test Demo 2</title>
    <link rel="stylesheet" href="demo2.css"/>
    <script src="jquery-2.1.4.min.js"></script>
</head>
<body>
<div class="cont">
    <div class="imgcont">
        <img src="1.png"/>
        <img src="2.png"/>
        <img src="3.png"/>
        <img src="4.png"/>
        <img src="5.png"/>
        <img src="6.png"/>
        <img src="7.png"/>
    </div>
    <div class="btn">
        <a>上一页</a>
        <a>下一页</a>
    </div>
</div>
<script>
    var height = document.documentElement.clientHeight - 30;
    var width = Math.ceil(height * 1366/856);
    var img = document.getElementsByTagName('img');
    var imgLen = $('.imgcont img').length;
    $(function(){
        $('.imgcont>img').css('height',height);
        $('.imgcont').css({
            height:height,
            width:(width+30) * imgLen
        });
        $('.cont').css({
            height:height,
            width:width + 30
        });
        $('.btn>a:first-child').html('');
    });
    var isAnimating = false;
    $('.btn>a:first-child').on('click',function(){
        $('.btn>a:last-child').html('下一页');
        var left = $('.imgcont').position().left;
        if(left>-2*width){
            $('.btn>a:first-child').html('');
        }
        if(isAnimating == false){
            isAnimating = true;
            $('.imgcont').css('left',left+width+30);
            setTimeout(function(){
                isAnimating = false;
            },1000);
        }else{
            return false;
        }
    });
    $('.btn>a:last-child').on('click',function(){
        $('.btn>a:first-child').html('上一页');
        var left = $('.imgcont').position().left;
        if($('.btn>a:last-child').html()=='下一页'){
            if(isAnimating == false){
                isAnimating = true;
                $('.imgcont').css('left',left-width-30);
                setTimeout(function(){
                    if(left<-(imgLen-2)*width){
                        $('.btn>a:last-child').html('完成');
                    }
                    isAnimating = false;
                },750);
            }else{
                return false;
            }
        }else{
            return false;
        }
    });
</script>
</body>
</html>