webpackJsonp([7],{1154:function(a,n,e){a.exports=e(1155)},1155:function(a,n,e){"use strict";function t(a){var n=[],e=0===a.data.my_rank?"暂无排":"第"+a.data.my_rank;if(a.data.arrays.length>0){n.push('<div class="single-rank-table-head">\n                      <span class="rh-user">用户信息</span>\n                      <span class="rh-score">得分</span>\n                      <span class="rh-play">查看</span>\n                    </div>');for(var t=0;t<a.data.arrays.length;t++){var s='<div class="rank-row">\n                          <span class="r-rank">'+(t<3?'<img src="//static.1tai.com/images/labweb/i_medal_'+(t+1)+'.png">':t+1)+'</span>\n                          <span class="r-avatar"><img src="//static.1tai.com/images/labweb/avatar.jpg"></span>\n                          <span class="r-name">'+a.data.arrays[t].user_name+'</span>\n                          <span class="r-score">'+a.data.arrays[t].final.toFixed(1)+'</span>\n                          <span class="r-play" data-usid="'+a.data.arrays[t].user_score_id+'">\n                            <i class="iconfont icon-bofang"></i>\n                          </span>\n                        </div>';n.push(s)}}else{n.push('<div class="no-single-rank">\n                    <img src="//static.1tai.com/images/labweb/nothing.png">\n                    <div class="nsr-intro">\n                      暂无排行，欢迎打榜\n                    </div>\n                  </div>')}c()("#myrank").empty().html(e),c()(".single-rank-container .single-rank-table").empty().append(n.join(""))}Object.defineProperty(n,"__esModule",{value:!0});var s=e(76),i=e.n(s),r=e(43),l=e.n(r),o=e(26),c=e.n(o),d=e(77),p=e(62),g=e(221),m=e(25),u=(e.n(m),e(63)),h=(e.n(u),e(1156)),v=(e.n(h),{}),k={week:[],overall:[]},b={},f=window.localStorage.getItem("ppeaAct"),w={exam:"/ppea/api/exam",test:"/ppea/api/category"},y={exam:"/ppea/api/exam/detail/",test:"/ppea/api/category/score/"},x={exam:"/ppea/api/score/rank/",test:"/ppea/api/score/rank/"},C={exam:"/ppea/api/rank/week/2",test:"/ppea/api/rank/week/1"},_={exam:"/ppea/api/rank/overall/2",test:"/ppea/api/rank/overall/1"},j={exam:"/ppea/api/user/score/record",test:"/ppea/api/user/score/record"},L=new g.a;L.on("/main",function(){c()(".g-bd").removeClass("on"),c()(".page-main").addClass("on")}),L.on("/album(/:id)",function(a){p.a.showLoading(),Object(d.a)(y[f]+a).then(function(n){var e=[];if(200===n.meta.code){for(var t=0;t<n.data.length;t++){var s="<tr>\n                            <td>"+(t+1)+'</td>\n                            <td class="score-name" data-aid="'+a+'" data-sid="'+n.data[t].id+'">\n                              '+n.data[t].name+'\n                            </td>\n                            <td class="view-single-rank" data-sid="'+n.data[t].id+'">\n                              <i class="iconfont icon-ranking"></i>\n                            </td>\n                          </tr>';e.push(s)}c()(".page-album .main-table tbody").empty().append(e.join(""));var i=JSON.parse(window.localStorage.getItem("albuminfo"));c()("#detail-cover-img").attr("src",i[a].image),c()("#detail-cover-name").html(i[a].name),c()("#detail-song-num").html(n.data.length)}else p.a.alert(n.meta.message)}).then(function(){p.a.hideLoading()}),c()(".g-bd").removeClass("on"),c()(".page-album").addClass("on")}),L.on("/record",function(){Object(d.a)(j[f]).then(function(a){p.a.showLoading();var n=[];if(200===a.meta.code){for(var e=0;e<a.data.length;e++){var t="<tr>\n                              <td>"+(e+1)+"</td>\n                              <td>"+a.data[e].name+"</td>\n                              <td>"+a.data[e].final.toFixed(1)+'</td>\n                              <td class="record-play" data-sid="'+a.data[e].score_id+'" \n                                data-usid="'+a.data[e].user_score_id+'">\n                                <i class="iconfont icon-bofang"></i>\n                              </td>\n                            </tr>';n.push(t)}c()(".page-record .main-table tbody").append(n.join("")),c()("#record_num").html(a.data.length)}else p.a.alert(a.meta.message)}).then(function(){p.a.hideLoading()}),c()(".g-bd").removeClass("on"),c()(".page-record").addClass("on")}),L.on("/rank(/:name)",function(a){var n=[Object(d.a)(C[f]),Object(d.a)(_[f])];0!==k.week.length&&0!==k.overall.length||(p.a.showLoading(),l.a.all(n).then(function(a){for(var n=0;n<a.length;n++)if(0===n)if(200===a[n].meta.code){for(var e=[],t={"-1":"icon-xia",0:"icon-hengxian",1:"icon-shang"},s=0;s<a[n].data.length;s++){var i=a[n].data[s].user.avatar||"//static.1tai.com/images/labweb/avatar.jpg",r='<div class="rank-row">\n                              <span class="r-rank">'+(s<3?'<img src="//static.1tai.com/images/labweb/i_medal_'+(s+1)+'.png">':s+1)+'</span>\n                              <span class="r-avatar"><img src="'+i+'"></span>\n                              <span class="r-name">'+a[n].data[s].user.user_name+'</span>\n                              <span class="r-score">'+a[n].data[s].points.toFixed(1)+'</span>\n                              <span class="r-adv"><i class="iconfont '+t[a[n].data[s].user.goal]+'"></i></span>\n                              </div>';e.push(r)}c()(".page-rank .rank-week").empty().append(e.join("")),k.week=e}else p.a.alert(a[n].meta.message);else if(200===a[n].meta.code){for(var l=[],o=0;o<a[n].data.length;o++){var d=a[n].data[o].user.avatar||"//static.1tai.com/images/labweb/avatar.jpg",g='<div class="rank-row">\n                              <span class="r-rank">'+(o<3?'<img src="//static.1tai.com/images/labweb/i_medal_'+(o+1)+'.png">':o+1)+'</span>\n                              <span class="r-avatar"><img src="'+d+'"></span>\n                              <span class="r-name">'+a[n].data[o].user.user_name+'</span>\n                              <span class="r-score">'+a[n].data[o].points.toFixed(1)+"</span>\n                              </div>";l.push(g)}c()(".page-rank .rank-total").empty().append(l.join("")),k.overall=l}else p.a.alert(a[n].meta.message)}).then(function(){p.a.hideLoading()}).catch(function(a){console.log(a)})),c()(".g-bd").removeClass("on"),c()(".page-rank").addClass("on"),a&&"week"!==a?(c()(".rank-table").removeClass("on"),c()(".title-button").removeClass("title-selected"),c()(".page-rank .rank-total").addClass("on"),c()(".page-rank .title-total").addClass("title-selected")):(c()(".rank-table").removeClass("on"),c()(".title-button").removeClass("title-selected"),c()(".page-rank .rank-week").addClass("on"),c()(".page-rank .title-week").addClass("title-selected"))}),L.init(),c()(".go-back").click(function(){window.location.hash="#/main"}),c()(".album-container .main-table").on("click",".view-single-rank",function(a){var n=this.dataset.sid;v[n]?(t(v[n]),c()(".page-album .single-rank-container .loading-content").addClass("hide"),c()(".page-album .single-rank-container .single-rank-table").addClass("on")):Object(d.a)(x[f]+n).then(function(a){200===a.meta.code?(t(a),v[n]=a,c()(".page-album .single-rank-container .loading-content").addClass("hide"),c()(".page-album .single-rank-container .single-rank-table").addClass("on")):p.a.alert(a.meta.message)}),c()(".page-album .single-rank-container").addClass("on"),c()(".page-album .single-rank-container .single-wrap").fadeIn("500"),c()(".page-album .single-rank-container .single-rank").css("right","0px")}),c()(".page-album .single-rank-container .single-wrap").click(function(){var a=25/64*window.innerWidth;c()(".page-album .single-rank-container .single-rank").css("right",-a+"px"),c()(".page-album .single-rank-container .single-wrap").fadeOut("500",function(){c()(".page-album .single-rank-container").removeClass("on"),c()(".page-album .single-rank-container .loading-content").removeClass("hide"),c()(".page-album .single-rank-container .single-rank-table").removeClass("on")})}),c()(".album-container .main-table").on("click",".score-name",function(a){var n={scoreId:this.dataset.sid,from:{url:"/dist/view/ppea_new/index.html#/album",albumId:this.dataset.aid}};localStorage.setItem("playData",i()(n)),window.location.href="/dist/view/ppea_new/play.html"}),c()(function(){""===window.location.hash&&(window.location.hash="#/main"),c()("#main-title").html("exam"===f?"考级专区":"测评专区"),c()("#album-title").html("exam"===f?"考级曲目":"测评曲目"),Object(d.a)(w[f]).then(function(a){if(200===a.meta.code){for(var n=[],e=0;e<a.data.length;e++){var t='<a class="list-item" href="#/album/'+a.data[e].id+'">\n                            <div class="item-img">\n                              <img src="'+a.data[e].image+'">\n                            </div>\n                            <div class="item-intro">\n                              '+a.data[e].name+"\n                            </div>\n                          </a>";n.push(t),b[a.data[e].id]={image:a.data[e].image,name:a.data[e].name},window.localStorage.setItem("albuminfo",i()(b))}c()(".page-main .list-main").empty().append(n.join(""))}else p.a.alert(a.meta.message)}).then(function(){p.a.hideLoading()})})},1156:function(a,n){},14:function(a,n){a.exports=dll},221:function(a,n,e){"use strict";var t=e(6),s=e.n(t),i=e(8),r=e.n(i),l=function(){function a(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s()(this,a),this.cache=n}return r()(a,[{key:"on",value:function(a,n){this.cache[a]=n}},{key:"trigger",value:function(a){var n=this.cache;for(var e in n){var t=this.initRegexps(e);if(t.test(a)){var s=n[e]||function(){},i=this.getParams(t,a);s.apply(this,i)}}}},{key:"initRegexps",value:function(a){return a=a.replace(/[/,.+\-?$#{}[\]]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\/\w?:\w+)+/g,"/([^/]+)").replace(/\*\w*/g,"([^?]*?)"),new RegExp("^"+a+"$")}},{key:"getParams",value:function(a,n){return a.exec(n).slice(1)}},{key:"init",value:function(){var a=this;window.addEventListener("hashchange",function(){var n=location.hash.slice(1);a.trigger(n)}),window.addEventListener("load",function(){var n=location.hash.slice(1);a.trigger(n)})}}]),a}();n.a=l}},[1154]);