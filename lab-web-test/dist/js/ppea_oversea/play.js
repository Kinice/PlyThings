webpackJsonp([3],{1157:function(n,t,e){n.exports=e(1158)},1158:function(n,t,e){"use strict";function o(){return k||u.a.alert("该功能需在连接The ONE智能设备时使用"),k}Object.defineProperty(t,"__esModule",{value:!0});var a=e(47),i=e.n(a),r=e(48),c=e.n(r),s=e(76),l=e.n(s),d=e(26),f=e.n(d),u=e(62),h=e(92),p=e(276),m=e(25),v=(e.n(m),e(1159)),y=(e.n(v),e(63)),x=(e.n(y),function(){var n=c()(i.a.mark(function n(t){var e;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S.loadScore(t);case 2:return e=n.sent,n.abrupt("return",e);case 4:case"end":return n.stop()}},n,this)}));return function(t){return n.apply(this,arguments)}}()),w=function(){var n=c()(i.a.mark(function n(){var t;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S.stopAndSubmitRecord();case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}},n,this)}));return function(){return n.apply(this,arguments)}}(),g=JSON.parse(window.localStorage.getItem("playData")),C=document.getElementById("play-main-container"),S=new h.a(C,{pageClassName:"svg-page",rollSelector:""}),k=!1,M={name:""},b=!1,I=!1;f()(function(){x(g.scoreId).then(function(n){}).finally(function(){u.a.hideLoading(),f()(C).css({overflowY:"scroll"})}),S.on("device.connect",function(n){k=!0,M=n,f()("#device-status .linked").removeClass("hide"),f()("#device-status .notlinked").addClass("hide")}),S.on("device.disconnect",function(){k=!1,f()("#device-status .linked").addClass("hide"),f()("#device-status .notlinked").removeClass("hide")}),S.on("scorePlayer.end",function(){f()("#info-music0").find(".iconfont").removeClass("icon-zanting"),f()("#info-music0").find(".iconfont").addClass("icon-icon-test"),f()("#info-music0").find("span").text("播放曲谱"),b=!1}),S.on("scroll",function(n){var t=C.clientWidth/595,e=n.pos*t+n.element.offsetTop-80*t;p.a.scrollScoreAuto(f()(".play-main"),e)})}),f()("#info-play0").click(function(){if(!o())return!1;I?(f()(this).find(".iconfont").removeClass("icon-zanting"),f()(this).find(".iconfont").addClass("icon-play"),f()(this).find("span").text("开始演奏"),I=!1,u.a.showLoading(),w().then(function(n){var t=n.score,e=document.getElementById("case-six");f()("#play-final").html(t.final),f()("#play-case").fadeIn(500,function(){p.a.renderChart(e,t)});var o={recordId:n.id,from:{url:"/dist/view/ppea_new/play.html",scoreId:g.scoreId}};window.localStorage.setItem("playBackData",l()(o))}).catch(function(n){console.error(n),u.a.alert("出现未知错误")}).finally(function(){u.a.hideLoading()})):(f()(this).find(".iconfont").removeClass("icon-play"),f()(this).find(".iconfont").addClass("icon-zanting"),f()(this).find("span").text("结束演奏"),setTimeout(function(){f()("#main-bottom").fadeOut(500)},3e3),I=!0,S.startRecord())}),f()("#info-music0").click(function(){return!!o()&&("TOL"===M.name?(u.a.alert("该功能在连接The ONE智能灯条时不可用"),!1):void(b?(f()(this).find(".iconfont").removeClass("icon-zanting"),f()(this).find(".iconfont").addClass("icon-icon-test"),f()(this).find("span").text("播放曲谱"),S.stopListenScore(),b=!1):(f()(this).find(".iconfont").removeClass("icon-icon-test"),f()(this).find(".iconfont").addClass("icon-zanting"),f()(this).find("span").text("结束播放"),S.startListenScore(),b=!0)))}),f()("#case-sure").click(function(){f()("#play-case").css("display","none"),window.location.href="/dist/view/ppea_new/playback.html"}),f()("#go-back").click(function(){window.location.href=g.from.url+"/"+g.from.albumId})},1159:function(n,t){},14:function(n,t){n.exports=dll},276:function(n,t,e){"use strict";var o=e(57),a=e.n(o),i=e(135);e.n(i);t.a={renderChart:function(n,t){var e={radar:{name:{textStyle:{color:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#333"}},indicator:[{name:"音准"+Math.round(t.pitch),max:100},{name:"表现力"+Math.round(t.expressive),max:100},{name:"技巧"+Math.round(t.technique),max:100},{name:"节奏"+Math.round(t.rhythm),max:100},{name:"完整性"+Math.round(t.complete),max:100},{name:"难度"+Math.round(t.difficulty),max:100}],splitArea:{areaStyle:{color:["#f1f1f1"]}},axisLine:{lineStyle:{color:"#fff"}},splitLine:{lineStyle:{color:"#fff"}}},series:[{name:"最终得分",type:"radar",lineStyle:{normal:{color:"#ff487d"}},areaStyle:{normal:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#fff"},{offset:1,color:"#fa87aa"}],globalCoord:!1}}},data:[{value:[Math.round(t.pitch),Math.round(t.expressive),Math.round(t.technique),Math.round(t.rhythm),Math.round(t.complete),Math.round(t.difficulty)],name:"最终得分"}]}]};a.a.init(n).setOption(e)},scrollScoreAuto:function(n,t){n.animate({scrollTop:t},200)}}}},[1157]);