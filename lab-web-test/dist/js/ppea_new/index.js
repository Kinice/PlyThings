webpackJsonp([5],{48:function(a,n){a.exports=dll},708:function(a,n,e){a.exports=e(709)},709:function(a,n,e){"use strict";function t(a){var n=[],e=0===a.data.my_rank?"暂无排":"第"+a.data.my_rank;if(a.data.arrays.length>0){n.push('<div class="single-rank-table-head">\n                      <span class="rh-user">用户信息</span>\n                      <span class="rh-score">得分</span>\n                      <span class="rh-play">查看</span>\n                    </div>');for(var t=0;t<a.data.arrays.length;t++){var i='<div class="rank-row">\n                          <span class="r-rank">'+(t<3?'<img src="//static.1tai.com/images/labweb/i_medal_'+(t+1)+'.png">':t+1)+'</span>\n                          <span class="r-avatar"><img src="//static.1tai.com/images/labweb/avatar.jpg"></span>\n                          <span class="r-name">'+a.data.arrays[t].user_name+'</span>\n                          <span class="r-score">'+a.data.arrays[t].final.toFixed(1)+'</span>\n                          <span class="r-play"\n                            data-usid="'+a.data.arrays[t].user_score_id+'"\n                            data-aid="'+b+'"\n                            data-name="'+a.data.arrays[t].user_name+'"\n                            data-final="'+a.data.arrays[t].final.toFixed(1)+'">\n                            <i class="iconfont icon-bofang"></i>\n                          </span>\n                        </div>';n.push(i)}}else{n.push('<div class="no-single-rank">\n                    <img src="//static.1tai.com/images/labweb/nothing.png">\n                    <div class="nsr-intro">\n                      暂无排行，欢迎打榜\n                    </div>\n                  </div>')}c()("#myrank").empty().html(e),c()(".single-rank-container .single-rank-table").empty().append(n.join(""))}Object.defineProperty(n,"__esModule",{value:!0});var i=e(154),s=e.n(i),r=e(81),o=e.n(r),l=e(115),c=e.n(l),d=e(129),p=e(157),m=e(710),g=e(79),u=(e.n(g),e(265)),h=(e.n(u),e(711)),k=(e.n(h),{}),v={week:[],overall:[]},f={},w=window.localStorage.getItem("ppeaAct"),b="",y={exam:"/ppea/api/exam",test:"/ppea/api/category"},x={exam:"/ppea/api/exam/detail/",test:"/ppea/api/category/score/"},_={exam:"/ppea/api/score/rank/",test:"/ppea/api/score/rank/"},C={exam:"/ppea/api/rank/week/2",test:"/ppea/api/rank/week/1"},I={exam:"/ppea/api/rank/overall/2",test:"/ppea/api/rank/overall/1"},j={exam:"/ppea/api/user/score/record/2",test:"/ppea/api/user/score/record/1"},S=new m.a;S.on("/main",function(){c()(".g-bd").removeClass("on"),c()(".page-main").addClass("on")}),S.on("/album(/:id)",function(a){b=a,p.a.showLoading(),c()(".page-album .main-table tbody").empty(),Object(d.a)(x[w]+a).then(function(n){var e=[];if(200===n.meta.code){for(var t=0;t<n.data.length;t++){var i="<tr>\n                            <td>"+(t+1)+'</td>\n                            <td class="score-name" data-aid="'+a+'" data-sid="'+n.data[t].id+'">\n                              '+n.data[t].name+'\n                            </td>\n                            <td class="view-single-rank" data-sid="'+n.data[t].id+'">\n                              <i class="iconfont icon-ranking"></i>\n                            </td>\n                          </tr>';e.push(i)}c()(".page-album .main-table tbody").append(e.join(""));var s=JSON.parse(window.localStorage.getItem("albuminfo"));c()("#detail-cover-img").attr("src",s[a].image),c()("#detail-cover-name").html(s[a].name),c()("#detail-song-num").html(n.data.length)}else p.a.alert(n.meta.message)}).then(function(){p.a.hideLoading()}),c()(".g-bd").removeClass("on"),c()(".page-album").addClass("on")}),S.on("/record",function(){Object(d.a)(j[w]).then(function(a){p.a.showLoading();var n=[];if(200===a.meta.code){for(var e=0;e<a.data.length;e++){var t="<tr>\n                              <td>"+(e+1)+"</td>\n                              <td>"+a.data[e].name+"</td>\n                              <td>"+a.data[e].final.toFixed(1)+'</td>\n                              <td class="record-play" data-sid="'+a.data[e].score_id+'" \n                                data-usid="'+a.data[e].user_score_id+'">\n                                <i class="iconfont icon-bofang"></i>\n                              </td>\n                            </tr>';n.push(t)}c()(".page-record .main-table tbody").empty().append(n.join("")),c()("#record_num").html(a.data.length)}else p.a.alert(a.meta.message)}).then(function(){p.a.hideLoading()}),c()(".g-bd").removeClass("on"),c()(".page-record").addClass("on")}),S.on("/rank(/:name)",function(a){var n=[Object(d.a)(C[w]),Object(d.a)(I[w])];0!==v.week.length&&0!==v.overall.length||(p.a.showLoading(),o.a.all(n).then(function(a){for(var n=0;n<a.length;n++)if(200===a[n].meta.code){var e=function(a){for(var n=[],e={"-1":"icon-xia",0:"icon-hengxian",1:"icon-shang"},t=0;t<a.length;t++){var i=a[t].user.avatar?function(a){return a.replace(/http:\/\//,"https://")}(a[t].user.avatar):"//static.1tai.com/images/labweb/avatar.jpg",s='<div class="rank-row">\n                    <span class="r-rank">'+(t<3?'<img src="//static.1tai.com/images/labweb/i_medal_'+(t+1)+'.png">':t+1)+'</span>\n                    <span class="r-avatar"><img src="'+i+'"></span>\n                    <span class="r-name">'+a[t].user.user_name+'</span>\n                    <span class="r-score">'+a[t].points.toFixed(1)+'</span>\n                    <span class="r-adv"><i class="iconfont '+e[a[t].user.goal]+'"></i></span>\n                    </div>';n.push(s)}return n}(a[n].data);0===n?(c()(".page-rank .rank-week").empty().append(e.join("")),v.week=e):(c()(".page-rank .rank-total").empty().append(e.join("")),v.overall=e)}else p.a.alert(a[n].meta.message)}).then(function(){p.a.hideLoading()}).catch(function(a){console.log(a)})),c()(".g-bd").removeClass("on"),c()(".page-rank").addClass("on"),a&&"week"!==a?(c()(".rank-table").removeClass("on"),c()(".title-button").removeClass("title-selected"),c()(".page-rank .rank-total").addClass("on"),c()(".page-rank .title-total").addClass("title-selected")):(c()(".rank-table").removeClass("on"),c()(".title-button").removeClass("title-selected"),c()(".page-rank .rank-week").addClass("on"),c()(".page-rank .title-week").addClass("title-selected"))}),S.init(),c()(".go-back").click(function(){window.location.hash="#/main"}),c()("#rank-back").click(function(){window.localStorage.getItem("rankFrom")?window.location.href="/ppea_new/"+window.localStorage.getItem("rankFrom")+".html":window.location.hash="#/main",window.localStorage.removeItem("rankFrom")}),c()(".album-container .main-table").on("click",".view-single-rank",function(a){var n=this.dataset.sid;k[n]?(t(k[n]),c()(".page-album .single-rank-container .loading-content").addClass("hide"),c()(".page-album .single-rank-container .single-rank-table").addClass("on")):Object(d.a)(_[w]+n).then(function(a){200===a.meta.code?(t(a),k[n]=a,c()(".page-album .single-rank-container .loading-content").addClass("hide"),c()(".page-album .single-rank-container .single-rank-table").addClass("on")):p.a.alert(a.meta.message)}),c()(".page-album .single-rank-container").addClass("on"),c()(".page-album .single-rank-container .single-wrap").fadeIn("500"),c()(".page-album .single-rank-container .single-rank").css("right","0px")}),c()(".page-album .single-rank-container .single-wrap").click(function(){var a=25/64*window.innerWidth;c()(".page-album .single-rank-container .single-rank").css("right",-a+"px"),c()(".page-album .single-rank-container .single-wrap").fadeOut("500",function(){c()(".page-album .single-rank-container").removeClass("on"),c()(".page-album .single-rank-container .loading-content").removeClass("hide"),c()(".page-album .single-rank-container .single-rank-table").removeClass("on")})}),c()(".album-container .main-table").on("click",".score-name",function(a){var n={scoreId:this.dataset.sid,from:{url:"/ppea_new/index.html#/album",albumId:this.dataset.aid}};window.localStorage.setItem("playData",s()(n)),window.location.href="/ppea_new/play.html"}),c()(".single-rank-container .single-rank-table").on("click",".r-play",function(a){var n={recordId:this.dataset.usid,from:{url:"/ppea_new/index.html#/album",albumId:this.dataset.aid},user:{name:this.dataset.name,final:this.dataset.final}};window.localStorage.setItem("playBackSingleData",s()(n)),window.location.href="/ppea_new/playback_single.html"}),c()(".record-container .main-table").on("click",".record-play",function(a){var n={recordId:this.dataset.usid,scoreId:this.dataset.sid,from:{url:"/ppea_new/index.html#/record"}};window.localStorage.setItem("playBackData",s()(n)),window.location.href="/ppea_new/playback.html"}),c()(function(){""===window.location.hash&&(window.location.hash="#/main"),c()("#main-title").html("exam"===w?"考级专区":"评测专区"),c()("#album-title").html("exam"===w?"考级曲目":"评测曲目"),Object(d.a)(y[w]).then(function(a){if(200===a.meta.code){for(var n=[],e=0;e<a.data.length;e++){var t='<a class="list-item" href="#/album/'+a.data[e].id+'">\n                            <div class="item-img">\n                              <img src="'+a.data[e].image+'">\n                            </div>\n                            <div class="item-intro">\n                              '+a.data[e].name+"\n                            </div>\n                          </a>";n.push(t),f[a.data[e].id]={image:a.data[e].image,name:a.data[e].name},window.localStorage.setItem("albuminfo",s()(f))}c()(".page-main .list-main").empty().append(n.join(""))}else p.a.alert(a.meta.message)}).then(function(){p.a.hideLoading()})})},710:function(a,n,e){"use strict";var t=e(14),i=e.n(t),s=e(18),r=e.n(s),o=function(){function a(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,a),this.cache=n}return r()(a,[{key:"on",value:function(a,n){this.cache[a]=n}},{key:"trigger",value:function(a){var n=this.cache;for(var e in n){var t=this.initRegexps(e);if(t.test(a)){var i=n[e]||function(){},s=this.getParams(t,a);i.apply(this,s)}}}},{key:"initRegexps",value:function(a){return a=a.replace(/[/,.+\-?$#{}[\]]/g,"\\$&").replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\/\w?:\w+)+/g,"/([^/]+)").replace(/\*\w*/g,"([^?]*?)"),new RegExp("^"+a+"$")}},{key:"getParams",value:function(a,n){return a.exec(n).slice(1)}},{key:"init",value:function(){var a=this;window.addEventListener("hashchange",function(){var n=location.hash.slice(1);a.trigger(n)}),window.addEventListener("load",function(){var n=location.hash.slice(1);a.trigger(n)})}}]),a}();n.a=o},711:function(a,n){}},[708]);